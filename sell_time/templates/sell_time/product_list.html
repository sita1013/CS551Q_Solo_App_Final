<!DOCTYPE html>
<html>
<head>
    <title>Time Shop</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        h1 {
            text-align: center;
        }
        .button-row {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        select {
            background-color: lightblue;
            padding: 10px 20px;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
        }
        #future-select {
            background-color: lightblue;
        }
        #past-select {
            background-color: lightcoral;
        }    </style>
</head>
<body>
    <h1>Buy Some Time!</h1>
    <div class = "button-row">
        <form method = "post">
            {% csrf_token %}
            <select id = "future-select" name="selected_package"></select>
        </form>
    
        <form method = "post">
            {% csrf_token %}
            <select id = "past-select" name="selected_package"></select>
        </form>
    </div>
    
    <div style = "text-align: center; margin-top: 30px;">
        <a href = "{% url 'cart' %}" class = "btn">Check Out</a>
        <a href = "{% url 'homepage' %}" class = "btn">Return to Homepage</a>
        <a href = "{% url 'graphs' %}" class = "btn">About Us</a>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        function initSelect2(id, type, placeholder) {
            $(id).select2({
                placeholder: placeholder,
                ajax: {
                    url: "{% url 'timepackage_search' %}",
                    dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        return {
                            q: params.term,
                            type: type
                        };
                    },
                    processResults: function (data) {
                        return {
                            results: data.results
                        };
                    },
                    cache: true
                }
            }).on('change', function () {
                this.form.submit();
            });
        }

        initSelect2('#future-select', 'future', 'Towards Your Future');
        initSelect2('#past-select', 'past', 'For Your Past');
    </script>
</body>
</html>
